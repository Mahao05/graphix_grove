{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-12">
    <h1 class="text-center">Dashboard</h1>
    <p class="text-center">Overview of cryptocurrency market trends.</p>
  </div>
</div>

<div class="row">
  <div class="col-md-8 col-12 mx-auto">
    <canvas id="marketOverview" class="w-100"></canvas>
  </div>
</div>

<script>
  const socket = io();
  socket.on("updateData", (data) => {
    const ctx = document.getElementById('marketOverview').getContext('2d');
    new Chart(ctx, {
      type: 'pie',
      data: {
        labels: Object.keys(data.marketCap),
        datasets: [{
          data: Object.values(data.marketCap),
          backgroundColor: ['#FF6384', '#36A2EB', '#FFCE56'],
        }]
      }
    });
  });
</script>
{% endblock %}

